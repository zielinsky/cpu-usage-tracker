\hypertarget{cputracker_8c}{}\doxysection{cputracker.\+c File Reference}
\label{cputracker_8c}\index{cputracker.c@{cputracker.c}}
{\ttfamily \#include \char`\"{}cputracker.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}analyzer.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}printer.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}reader.\+h\char`\"{}}\newline
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structproc__stat}{proc\+\_\+stat}} $\ast$ \mbox{\hyperlink{cputracker_8c_a6d7b4993bb9144e4cab9f9c7420c996a}{get\+\_\+item\+\_\+from\+\_\+data\+\_\+buffer}} (void)
\item 
unsigned long $\ast$ \mbox{\hyperlink{cputracker_8c_a2b8f2341417ff6536dcfd85113bd3a5d}{get\+\_\+item\+\_\+from\+\_\+print\+\_\+buffer}} (void)
\item 
void \mbox{\hyperlink{cputracker_8c_ac99b6069bf629214ce6258902739d613}{notify\+\_\+watchdog}} (int id)
\item 
void \mbox{\hyperlink{cputracker_8c_aa1407f3b7f6dc9f7ba1c2049f33cfa14}{main\+\_\+test}} (void)
\item 
int \mbox{\hyperlink{cputracker_8c_a840291bc02cba5474a4cb46a9b9566fe}{main}} (void)
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{cputracker_8c_ada75f380c42154c470e2e3c3431e428b}{g\+\_\+nproc}} = 0
\item 
pthread\+\_\+mutex\+\_\+t \mbox{\hyperlink{cputracker_8c_a1ea12f2cf7f8d6c55575a0fcdfaf25b3}{g\+\_\+data\+Buffer\+Mutex}} = PTHREAD\+\_\+\+MUTEX\+\_\+\+INITIALIZER
\item 
sem\+\_\+t \mbox{\hyperlink{cputracker_8c_ae4ab6859f08e8d192e332bcc0396aace}{g\+\_\+data\+Filled\+Space\+Semaphore}}
\item 
sem\+\_\+t \mbox{\hyperlink{cputracker_8c_abe340c3124d5bd13bbae74ca586ec052}{g\+\_\+data\+Left\+Space\+Semaphore}}
\item 
pthread\+\_\+mutex\+\_\+t \mbox{\hyperlink{cputracker_8c_a61bf1e5999a9da9e3ef534a10f2c3319}{g\+\_\+print\+Buffer\+Mutex}} = PTHREAD\+\_\+\+MUTEX\+\_\+\+INITIALIZER
\item 
sem\+\_\+t \mbox{\hyperlink{cputracker_8c_a65a12649958e4813753cdffd576cb282}{g\+\_\+print\+Filled\+Space\+Semaphore}}
\item 
sem\+\_\+t \mbox{\hyperlink{cputracker_8c_a1f1095a3fda9dda3517fabf56803f2e9}{g\+\_\+print\+Left\+Space\+Semaphore}}
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{cputracker_8c_a6d7b4993bb9144e4cab9f9c7420c996a}\label{cputracker_8c_a6d7b4993bb9144e4cab9f9c7420c996a}} 
\index{cputracker.c@{cputracker.c}!get\_item\_from\_data\_buffer@{get\_item\_from\_data\_buffer}}
\index{get\_item\_from\_data\_buffer@{get\_item\_from\_data\_buffer}!cputracker.c@{cputracker.c}}
\doxysubsubsection{\texorpdfstring{get\_item\_from\_data\_buffer()}{get\_item\_from\_data\_buffer()}}
{\footnotesize\ttfamily struct \mbox{\hyperlink{structproc__stat}{proc\+\_\+stat}} $\ast$ get\+\_\+item\+\_\+from\+\_\+data\+\_\+buffer (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{cputracker_8c_source_l00048}{48}} of file \mbox{\hyperlink{cputracker_8c_source}{cputracker.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00049\ \ \ \textcolor{keywordtype}{int}\ index\ =\ get\_semaphore\_value(\&g\_dataFilledSpaceSemaphore);}
\DoxyCodeLine{00050\ \ \ \textcolor{keywordflow}{return}\ g\_dataBuffer[index];}
\DoxyCodeLine{00051\ \}}

\end{DoxyCode}
\mbox{\Hypertarget{cputracker_8c_a2b8f2341417ff6536dcfd85113bd3a5d}\label{cputracker_8c_a2b8f2341417ff6536dcfd85113bd3a5d}} 
\index{cputracker.c@{cputracker.c}!get\_item\_from\_print\_buffer@{get\_item\_from\_print\_buffer}}
\index{get\_item\_from\_print\_buffer@{get\_item\_from\_print\_buffer}!cputracker.c@{cputracker.c}}
\doxysubsubsection{\texorpdfstring{get\_item\_from\_print\_buffer()}{get\_item\_from\_print\_buffer()}}
{\footnotesize\ttfamily unsigned long $\ast$ get\+\_\+item\+\_\+from\+\_\+print\+\_\+buffer (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{cputracker_8c_source_l00053}{53}} of file \mbox{\hyperlink{cputracker_8c_source}{cputracker.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00054\ \ \ \textcolor{keywordtype}{int}\ index\ =\ get\_semaphore\_value(\&g\_printFilledSpaceSemaphore);}
\DoxyCodeLine{00055\ \ \ \textcolor{keywordflow}{return}\ g\_printBuffer[index];}
\DoxyCodeLine{00056\ \}}

\end{DoxyCode}
\mbox{\Hypertarget{cputracker_8c_a840291bc02cba5474a4cb46a9b9566fe}\label{cputracker_8c_a840291bc02cba5474a4cb46a9b9566fe}} 
\index{cputracker.c@{cputracker.c}!main@{main}}
\index{main@{main}!cputracker.c@{cputracker.c}}
\doxysubsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily int main (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{cputracker_8c_source_l00088}{88}} of file \mbox{\hyperlink{cputracker_8c_source}{cputracker.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00089\ \ \ \textcolor{keyword}{struct\ }sigaction\ action;}
\DoxyCodeLine{00090\ \ \ memset(\&action,\ 0,\ \textcolor{keyword}{sizeof}(\textcolor{keyword}{struct}\ sigaction));}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00092\ \ \ \textcolor{keywordflow}{if}\ (get\_nproc(\&g\_nproc)\ ==\ -\/1)\ \{}
\DoxyCodeLine{00093\ \ \ \ \ exit(EXIT\_FAILURE);}
\DoxyCodeLine{00094\ \ \ \}}
\DoxyCodeLine{00095\ \ \ g\_nproc++;}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ BUFFER\_SIZE;\ i++)\ \{}
\DoxyCodeLine{00098\ \ \ \ \ g\_dataBuffer[i]\ =\ malloc((\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long})g\_nproc\ *\ \textcolor{keyword}{sizeof}(\textcolor{keyword}{struct}\ \mbox{\hyperlink{structproc__stat}{proc\_stat}}));}
\DoxyCodeLine{00099\ \ \ \ \ g\_printBuffer[i]\ =\ malloc((\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long})g\_nproc\ *\ \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}));}
\DoxyCodeLine{00100\ \ \ \ \ \textcolor{keywordflow}{if}\ (g\_dataBuffer[i]\ ==\ NULL\ ||\ g\_printBuffer[i]\ ==\ NULL)\ \{}
\DoxyCodeLine{00101\ \ \ \ \ \ \ exit(EXIT\_FAILURE);}
\DoxyCodeLine{00102\ \ \ \ \ \}}
\DoxyCodeLine{00103\ \ \ \}}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00105\ \ \ \textcolor{keywordflow}{if}\ (sem\_init(\&g\_dataFilledSpaceSemaphore,\ 0,\ 0)\ ||}
\DoxyCodeLine{00106\ \ \ \ \ \ \ sem\_init(\&g\_dataLeftSpaceSemaphore,\ 0,\ BUFFER\_SIZE))\ \{}
\DoxyCodeLine{00107\ \ \ \ \ exit(EXIT\_FAILURE);}
\DoxyCodeLine{00108\ \ \ \}}
\DoxyCodeLine{00109\ }
\DoxyCodeLine{00110\ \ \ \textcolor{keywordflow}{if}\ (sem\_init(\&g\_printFilledSpaceSemaphore,\ 0,\ 0)\ ||}
\DoxyCodeLine{00111\ \ \ \ \ \ \ sem\_init(\&g\_printLeftSpaceSemaphore,\ 0,\ BUFFER\_SIZE))\ \{}
\DoxyCodeLine{00112\ \ \ \ \ exit(EXIT\_FAILURE);}
\DoxyCodeLine{00113\ \ \ \}}
\DoxyCodeLine{00114\ }
\DoxyCodeLine{00115\ \ \ pthread\_create(\&readerThreadId,\ NULL,\ reader,\ NULL);}
\DoxyCodeLine{00116\ \ \ pthread\_create(\&analyzerThreadId,\ NULL,\ analyzer,\ NULL);}
\DoxyCodeLine{00117\ \ \ pthread\_create(\&printerThreadId,\ NULL,\ printer,\ NULL);}
\DoxyCodeLine{00118\ }
\DoxyCodeLine{00119\ \ \ action.sa\_handler\ =\ handler;}
\DoxyCodeLine{00120\ \ \ sigaction(SIGTERM,\ \&action,\ NULL);}
\DoxyCodeLine{00121\ }
\DoxyCodeLine{00122\ \ \ watchdog();}
\DoxyCodeLine{00123\ }
\DoxyCodeLine{00124\ \ \ pthread\_join(readerThreadId,\ NULL);}
\DoxyCodeLine{00125\ \ \ pthread\_join(analyzerThreadId,\ NULL);}
\DoxyCodeLine{00126\ \ \ pthread\_join(printerThreadId,\ NULL);}
\DoxyCodeLine{00127\ }
\DoxyCodeLine{00128\ \ \ pthread\_mutex\_destroy(\&g\_dataBufferMutex);}
\DoxyCodeLine{00129\ \ \ sem\_destroy(\&g\_dataFilledSpaceSemaphore);}
\DoxyCodeLine{00130\ \ \ sem\_destroy(\&g\_dataLeftSpaceSemaphore);}
\DoxyCodeLine{00131\ }
\DoxyCodeLine{00132\ \ \ pthread\_mutex\_destroy(\&g\_printBufferMutex);}
\DoxyCodeLine{00133\ \ \ sem\_destroy(\&g\_printFilledSpaceSemaphore);}
\DoxyCodeLine{00134\ \ \ sem\_destroy(\&g\_printLeftSpaceSemaphore);}
\DoxyCodeLine{00135\ }
\DoxyCodeLine{00136\ \ \ pthread\_mutex\_destroy(\&watchdogMutex);}
\DoxyCodeLine{00137\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ BUFFER\_SIZE;\ i++)\ \{}
\DoxyCodeLine{00138\ \ \ \ \ free(g\_dataBuffer[i]);}
\DoxyCodeLine{00139\ \ \ \ \ free(g\_printBuffer[i]);}
\DoxyCodeLine{00140\ \ \ \}}
\DoxyCodeLine{00141\ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00142\ \}}

\end{DoxyCode}
\mbox{\Hypertarget{cputracker_8c_aa1407f3b7f6dc9f7ba1c2049f33cfa14}\label{cputracker_8c_aa1407f3b7f6dc9f7ba1c2049f33cfa14}} 
\index{cputracker.c@{cputracker.c}!main\_test@{main\_test}}
\index{main\_test@{main\_test}!cputracker.c@{cputracker.c}}
\doxysubsubsection{\texorpdfstring{main\_test()}{main\_test()}}
{\footnotesize\ttfamily void main\+\_\+test (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{cputracker_8c_source_l00081}{81}} of file \mbox{\hyperlink{cputracker_8c_source}{cputracker.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00082\ \ \ \textcolor{keywordtype}{int}\ nproc;}
\DoxyCodeLine{00083\ \ \ \textcolor{keywordflow}{if}\ (get\_nproc(\&nproc)\ ==\ 0)\ \{}
\DoxyCodeLine{00084\ \ \ \ \ assert(nproc\ >=\ 1);}
\DoxyCodeLine{00085\ \ \ \}}
\DoxyCodeLine{00086\ \}}

\end{DoxyCode}
\mbox{\Hypertarget{cputracker_8c_ac99b6069bf629214ce6258902739d613}\label{cputracker_8c_ac99b6069bf629214ce6258902739d613}} 
\index{cputracker.c@{cputracker.c}!notify\_watchdog@{notify\_watchdog}}
\index{notify\_watchdog@{notify\_watchdog}!cputracker.c@{cputracker.c}}
\doxysubsubsection{\texorpdfstring{notify\_watchdog()}{notify\_watchdog()}}
{\footnotesize\ttfamily void notify\+\_\+watchdog (\begin{DoxyParamCaption}\item[{int}]{id }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{cputracker_8c_source_l00058}{58}} of file \mbox{\hyperlink{cputracker_8c_source}{cputracker.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00059\ \ \ pthread\_mutex\_lock(\&watchdogMutex);}
\DoxyCodeLine{00060\ \ \ working[id]\ =\ 1;}
\DoxyCodeLine{00061\ \ \ pthread\_mutex\_unlock(\&watchdogMutex);}
\DoxyCodeLine{00062\ \}}

\end{DoxyCode}


\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{cputracker_8c_a1ea12f2cf7f8d6c55575a0fcdfaf25b3}\label{cputracker_8c_a1ea12f2cf7f8d6c55575a0fcdfaf25b3}} 
\index{cputracker.c@{cputracker.c}!g\_dataBufferMutex@{g\_dataBufferMutex}}
\index{g\_dataBufferMutex@{g\_dataBufferMutex}!cputracker.c@{cputracker.c}}
\doxysubsubsection{\texorpdfstring{g\_dataBufferMutex}{g\_dataBufferMutex}}
{\footnotesize\ttfamily pthread\+\_\+mutex\+\_\+t g\+\_\+data\+Buffer\+Mutex = PTHREAD\+\_\+\+MUTEX\+\_\+\+INITIALIZER}



Definition at line \mbox{\hyperlink{cputracker_8c_source_l00010}{10}} of file \mbox{\hyperlink{cputracker_8c_source}{cputracker.\+c}}.

\mbox{\Hypertarget{cputracker_8c_ae4ab6859f08e8d192e332bcc0396aace}\label{cputracker_8c_ae4ab6859f08e8d192e332bcc0396aace}} 
\index{cputracker.c@{cputracker.c}!g\_dataFilledSpaceSemaphore@{g\_dataFilledSpaceSemaphore}}
\index{g\_dataFilledSpaceSemaphore@{g\_dataFilledSpaceSemaphore}!cputracker.c@{cputracker.c}}
\doxysubsubsection{\texorpdfstring{g\_dataFilledSpaceSemaphore}{g\_dataFilledSpaceSemaphore}}
{\footnotesize\ttfamily sem\+\_\+t g\+\_\+data\+Filled\+Space\+Semaphore}



Definition at line \mbox{\hyperlink{cputracker_8c_source_l00011}{11}} of file \mbox{\hyperlink{cputracker_8c_source}{cputracker.\+c}}.

\mbox{\Hypertarget{cputracker_8c_abe340c3124d5bd13bbae74ca586ec052}\label{cputracker_8c_abe340c3124d5bd13bbae74ca586ec052}} 
\index{cputracker.c@{cputracker.c}!g\_dataLeftSpaceSemaphore@{g\_dataLeftSpaceSemaphore}}
\index{g\_dataLeftSpaceSemaphore@{g\_dataLeftSpaceSemaphore}!cputracker.c@{cputracker.c}}
\doxysubsubsection{\texorpdfstring{g\_dataLeftSpaceSemaphore}{g\_dataLeftSpaceSemaphore}}
{\footnotesize\ttfamily sem\+\_\+t g\+\_\+data\+Left\+Space\+Semaphore}



Definition at line \mbox{\hyperlink{cputracker_8c_source_l00012}{12}} of file \mbox{\hyperlink{cputracker_8c_source}{cputracker.\+c}}.

\mbox{\Hypertarget{cputracker_8c_ada75f380c42154c470e2e3c3431e428b}\label{cputracker_8c_ada75f380c42154c470e2e3c3431e428b}} 
\index{cputracker.c@{cputracker.c}!g\_nproc@{g\_nproc}}
\index{g\_nproc@{g\_nproc}!cputracker.c@{cputracker.c}}
\doxysubsubsection{\texorpdfstring{g\_nproc}{g\_nproc}}
{\footnotesize\ttfamily int g\+\_\+nproc = 0}



Definition at line \mbox{\hyperlink{cputracker_8c_source_l00008}{8}} of file \mbox{\hyperlink{cputracker_8c_source}{cputracker.\+c}}.

\mbox{\Hypertarget{cputracker_8c_a61bf1e5999a9da9e3ef534a10f2c3319}\label{cputracker_8c_a61bf1e5999a9da9e3ef534a10f2c3319}} 
\index{cputracker.c@{cputracker.c}!g\_printBufferMutex@{g\_printBufferMutex}}
\index{g\_printBufferMutex@{g\_printBufferMutex}!cputracker.c@{cputracker.c}}
\doxysubsubsection{\texorpdfstring{g\_printBufferMutex}{g\_printBufferMutex}}
{\footnotesize\ttfamily pthread\+\_\+mutex\+\_\+t g\+\_\+print\+Buffer\+Mutex = PTHREAD\+\_\+\+MUTEX\+\_\+\+INITIALIZER}



Definition at line \mbox{\hyperlink{cputracker_8c_source_l00015}{15}} of file \mbox{\hyperlink{cputracker_8c_source}{cputracker.\+c}}.

\mbox{\Hypertarget{cputracker_8c_a65a12649958e4813753cdffd576cb282}\label{cputracker_8c_a65a12649958e4813753cdffd576cb282}} 
\index{cputracker.c@{cputracker.c}!g\_printFilledSpaceSemaphore@{g\_printFilledSpaceSemaphore}}
\index{g\_printFilledSpaceSemaphore@{g\_printFilledSpaceSemaphore}!cputracker.c@{cputracker.c}}
\doxysubsubsection{\texorpdfstring{g\_printFilledSpaceSemaphore}{g\_printFilledSpaceSemaphore}}
{\footnotesize\ttfamily sem\+\_\+t g\+\_\+print\+Filled\+Space\+Semaphore}



Definition at line \mbox{\hyperlink{cputracker_8c_source_l00016}{16}} of file \mbox{\hyperlink{cputracker_8c_source}{cputracker.\+c}}.

\mbox{\Hypertarget{cputracker_8c_a1f1095a3fda9dda3517fabf56803f2e9}\label{cputracker_8c_a1f1095a3fda9dda3517fabf56803f2e9}} 
\index{cputracker.c@{cputracker.c}!g\_printLeftSpaceSemaphore@{g\_printLeftSpaceSemaphore}}
\index{g\_printLeftSpaceSemaphore@{g\_printLeftSpaceSemaphore}!cputracker.c@{cputracker.c}}
\doxysubsubsection{\texorpdfstring{g\_printLeftSpaceSemaphore}{g\_printLeftSpaceSemaphore}}
{\footnotesize\ttfamily sem\+\_\+t g\+\_\+print\+Left\+Space\+Semaphore}



Definition at line \mbox{\hyperlink{cputracker_8c_source_l00017}{17}} of file \mbox{\hyperlink{cputracker_8c_source}{cputracker.\+c}}.

